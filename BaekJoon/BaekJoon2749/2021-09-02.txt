2749번 피보나치 수 3

일반적인 피보나치 수로 풀면 되는데, 하나 문제가 있다.
그것은 바로 숫자가 엄청나게 크다는 점.
분할정복을 통해서 풀면 되지 않을까 싶은데
어디까지 구해야 하는지를 모르겠음
저 n이 10억인데 어떻게 풀거냐
분할정복을 해볼려고 한다. 일단.

분할 정복을 하려면 사실 N을 반으로 나누면서 이분법의 형태로 가져가는 것이 맞는데.
사실 피보나치 수열의 Fn = Fn-1 + Fn-2이기 때문에
식을 어떻게 세워야할지를 잘 모르겠다.
반반으로 나눠서 계산을 한다고 해도 그 반과 반을 더했을 때는 값이 나오지를 않으니...

피보나치 수열의 합
=> An+2 -1 = sum(1~An)

이걸 활용하면

sum(1~An) = An+2 + 1이다.

이걸 바탕으로 하면

sum(1~An/2) + sum ( An/2+1 + An) +1 = An+2가 될 거니까

이렇게 반복한다고 햇을 때

4 sum(An)
2 2
1 1 1 1

1 1 1 1
1+1 1+1

1 1 1 1
2
-> Sum(0~A2)
2 + 2
4
2 + 2= 4

F6 = 4-1 = 3;?

F4 = F2+1

F2 = 2

Sum(0) = 0
Sum(1) = 1
Sum(2) = 2
Sum(3) = 4
Sum(4) = 7
Sum(5) = 12
Sum(6) = ...
그런데 Sum을 분할정복한다는 건 아닌거 같은데
거듭제곱과 같은건 같은 식에 대한 반복이기 때문에
그렇다고 할 수 있는데 

일단 확실한건 N을 분할정복 하는건 무조건적으로 맞는데
이 분할정복을 어떻게 할거냐
식은 어떻게 세울거냐의 문제이다.
피보나치 수열의 값을 직접적으로 구하기 위해서는
Fn = Fn-1+Fn-2를 해야하는데
이런식으로 Fn-1을 계속 구하는거는 천억의 숫자를 계속 반복해야만한다는게
말이 안되는거 같음. 이렇게 할거면 DP로 구하는게 맞는거지

그래서 풀이를 찾아본 결과 총 2개의 풀이가 있는 것 같다.
1. 피사노 주기를 활용하는 방법
2. 행렬을 통한 거듭 제곱

1의 방법은 피사노 주기라고 피보나치 수열을 mod 연산 처리했을 때는 일정한 나머지가 나오는 주기가 있다는 내용으로
여기서는 결국 mod의 값이 백만이므로 k(10^n) = 15*10(n-1)이 되므로 150만이 된다.
그래서 피보나치 수열을 150만까지만 구하고, 나머지는 n % 150만을 통해서 구하면 된다.

2의 방법은 내가 생각하는 바와 비슷한 방법이었는데, 이를 수학적인 식으로 바꾼것이다.

이 때, A3 = A2+A1인데, 이를 풀어서 쓰면 2A1+A0가 된다.
1 1
1 0 이 되는 것이다.

여기서 추출해낼 수 있는 식이 An = {{1,1},{1,0}}^n-2 * {1,0}
가 된다.
그래서 저 행렬 거듭제곱만 구할 수 있으면 끝나기 때문에, 그 전에 했던 거듭제곱 식을 바탕으로 작성을 하였고,
정답을 받았다.

숫자가 터무니없이 커지는 것에 대비해서 분할정복을 한 것은 좋았는데, 문제는 분할정복을 할 방법을 생각해내지 못했다.
이게 매우 아쉽고, 실력을 늘리는데 이만한 문제집이 없다는 생각이 들었다


